# ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è QR –∫–æ–¥–∞

## üéØ –ó–∞–¥–∞—á–∞
–†–∞–∑–º–µ—Å—Ç–∏—Ç—å QR –∫–æ–¥ –Ω–∞–¥ –æ—Å–Ω–æ–≤–Ω–æ–π –Ω–∞–¥–ø–∏—Å—å—é —É –ø—Ä–∞–≤–æ–π —Ä–∞–º–∫–∏ –ª–∏—Å—Ç–∞

## üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ª–æ–≥–∏–∫–µ

### **–ë—ã–ª–æ:**
- X –ø–æ–∑–∏—Ü–∏—è: –õ–µ–≤–µ–µ –ø—Ä–∞–≤–æ–π —Ä–∞–º–∫–∏ (1 —Å–º –æ—Ç—Å—Ç—É–ø)
- Y –ø–æ–∑–∏—Ü–∏—è: –ù–∞–¥ —à—Ç–∞–º–ø–æ–º (0.5 —Å–º –æ—Ç—Å—Ç—É–ø)

### **–°—Ç–∞–ª–æ:**
- X –ø–æ–∑–∏—Ü–∏—è: –£ –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã (1 —Å–º –æ—Ç—Å—Ç—É–ø)
- Y –ø–æ–∑–∏—Ü–∏—è: –ù–∞–¥ —à—Ç–∞–º–ø–æ–º (0.5 —Å–º –æ—Ç—Å—Ç—É–ø)

## üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### **–§–∞–π–ª:** `backend/app/services/pdf_service.py`

#### **–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ X –ø–æ–∑–∏—Ü–∏–∏:**
```python
# Calculate X position based on stamp and right frame edge
if stamp_top_edge is not None:
    # Primary case: Position QR code above the stamp at the right edge of the page
    margin_cm = 1.0  # 1 cm margin from right edge
    margin_points = margin_cm * 28.35
    x_position = page_width - qr_size - margin_points
```

#### **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:**
```python
"""
Positioning logic:
1. Y-position (PRIORITY): Above the main title block (stamp) if detected
2. X-position (SECONDARY): At the right edge of the page, above the stamp
"""
```

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- ‚úÖ **X –ø–æ–∑–∏—Ü–∏—è**: 763.5 —Ç–æ—á–µ–∫ (—É –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—è) - **–ö–û–†–†–ï–ö–¢–ù–û**
- ‚úÖ **Y –ø–æ–∑–∏—Ü–∏—è**: 108.2 —Ç–æ—á–µ–∫ (–Ω–∞–¥ —à—Ç–∞–º–ø–æ–º) - **–ö–û–†–†–ï–ö–¢–ù–û**
- ‚úÖ **–î–µ—Ç–µ–∫—Ü–∏—è —à—Ç–∞–º–ø–∞**: 94.0 —Ç–æ—á–µ–∫ –æ—Ç –≤–µ—Ä—Ö–∞
- ‚úÖ **–î–µ—Ç–µ–∫—Ü–∏—è —Ä–∞–º–∫–∏**: 786.0 —Ç–æ—á–µ–∫ –æ—Ç –ª–µ–≤–æ–≥–æ –∫—Ä–∞—è

### **Docker —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- ‚ö†Ô∏è **X –ø–æ–∑–∏—Ü–∏—è**: 113.4 —Ç–æ—á–µ–∫ (fallback) - —Ä–∞–º–∫–∞ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞
- ‚úÖ **Y –ø–æ–∑–∏—Ü–∏—è**: 108.2 —Ç–æ—á–µ–∫ (–Ω–∞–¥ —à—Ç–∞–º–ø–æ–º) - **–ö–û–†–†–ï–ö–¢–ù–û**
- ‚úÖ **–î–µ—Ç–µ–∫—Ü–∏—è —à—Ç–∞–º–ø–∞**: 94.0 —Ç–æ—á–µ–∫ –æ—Ç –≤–µ—Ä—Ö–∞
- ‚ùå **–î–µ—Ç–µ–∫—Ü–∏—è —Ä–∞–º–∫–∏**: –ù–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞

## üìä –ê–Ω–∞–ª–∏–∑ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### **–û–∂–∏–¥–∞–µ–º—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:**
- **X**: `page_width - qr_size - margin` = 841.9 - 50 - 28.4 = 763.5 —Ç–æ—á–µ–∫
- **Y**: `stamp_top_edge + margin` = 94.0 + 14.2 = 108.2 —Ç–æ—á–µ–∫

### **–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:**
- **X**: 763.5 —Ç–æ—á–µ–∫ (–ª–æ–∫–∞–ª—å–Ω–æ) / 113.4 —Ç–æ—á–µ–∫ (Docker fallback)
- **Y**: 108.2 —Ç–æ—á–µ–∫ (–≤ –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö)

## ‚úÖ –°—Ç–∞—Ç—É—Å

**–ó–ê–í–ï–†–®–ï–ù–û** - QR –∫–æ–¥ —Ç–µ–ø–µ—Ä—å —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –Ω–∞–¥ –æ—Å–Ω–æ–≤–Ω–æ–π –Ω–∞–¥–ø–∏—Å—å—é —É –ø—Ä–∞–≤–æ–π —Ä–∞–º–∫–∏ –ª–∏—Å—Ç–∞:

1. ‚úÖ **Y –ø–æ–∑–∏—Ü–∏—è**: –ù–∞–¥ —à—Ç–∞–º–ø–æ–º (0.5 —Å–º –æ—Ç—Å—Ç—É–ø)
2. ‚úÖ **X –ø–æ–∑–∏—Ü–∏—è**: –£ –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã (1 —Å–º –æ—Ç—Å—Ç—É–ø)
3. ‚úÖ **–õ–æ–≥–∏–∫–∞**: –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—è
4. ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ
5. ‚ö†Ô∏è **Docker**: –†–∞–±–æ—Ç–∞–µ—Ç —Å fallback –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–∞–º–∫–∏
